<!DOCTYPE html>
<html lang>
  <head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">

<meta name="theme-color" content="#f8f5ec">
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="description" content="引导动画"><meta name="keywords" content="android"><link rel="alternate" href="/default" title="Lynn8570's Blog"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.11.0">
<link rel="canonical" href="https://lynn8570.github.io/2018/04/13/引导页面动画/">

<link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css"><link rel="stylesheet" type="text/css" href="/lib/nprogress/nprogress.min.css">
<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.11.0">

<script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<script>
  window.config = {"leancloud":{"app_id":null,"app_key":null},"toc":true,"fancybox":true,"pjax":true,"latex":false};
</script>

    <title>引导动画 - Lynn8570's Blog</title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Lynn8570's Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list"><a href="/">
        <li class="mobile-menu-item">首页
          </li>
      </a></ul>
</nav>
<div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Lynn8570's Blog</a>
</div>

<nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item">
          <a class="menu-item-link" href="/">
            首页
            </a>
        </li>
      </ul></nav>
</header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content"><article class="post">
    <header class="post-header">
      <h1 class="post-title">引导动画
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-04-13
        </span><span class="post-category">
            <a href="/categories/animation/">animation</a>
            </span>
        </div>
    </header>

    <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#引导动画"><span class="toc-text">引导动画</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#实现原理分析"><span class="toc-text">实现原理分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#每个部分的动画实现"><span class="toc-text">每个部分的动画实现</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#第一页分析"><span class="toc-text">第一页分析</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#第三页分析"><span class="toc-text">第三页分析</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#第四页分析"><span class="toc-text">第四页分析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#小结"><span class="toc-text">小结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#火箭的上升动画"><span class="toc-text">火箭的上升动画</span></a></li></ol></li></ol>
    </div>
  </div><div class="post-content"><h1 id="引导动画"><a href="#引导动画" class="headerlink" title="引导动画"></a>引导动画</h1><p>项目地址：<a href="https://github.com/githubliruiyuan/Animation" target="_blank" rel="noopener">Github</a></p>
<p>动画效果：</p>
<p><img src="https://github.com/githubliruiyuan/Animation/raw/master/gif/3.gif" alt="引导动画"></p>
<h2 id="实现原理分析"><a href="#实现原理分析" class="headerlink" title="实现原理分析"></a>实现原理分析</h2><ol>
<li><p>清单文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;manifest package=&quot;cn.lry.animation&quot;</span><br><span class="line">          xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;application</span><br><span class="line">        android:allowBackup=&quot;true&quot;</span><br><span class="line">        android:icon=&quot;@mipmap/ic_launcher&quot;</span><br><span class="line">        android:label=&quot;@string/app_name&quot;</span><br><span class="line">        android:supportsRtl=&quot;true&quot;</span><br><span class="line">        android:theme=&quot;@style/AppTheme&quot;&gt;</span><br><span class="line">        &lt;activity</span><br><span class="line">            android:name=&quot;.guide.MainActivity&quot;</span><br><span class="line">            android:label=&quot;@string/app_name&quot;&gt;</span><br><span class="line">            &lt;intent-filter&gt;</span><br><span class="line">                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;</span><br><span class="line">                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;</span><br><span class="line">            &lt;/intent-filter&gt;</span><br><span class="line">        &lt;/activity&gt;</span><br><span class="line"></span><br><span class="line">        &lt;activity android:name=&quot;.guide.GuideActivity&quot;/&gt;</span><br><span class="line">    &lt;/application&gt;</span><br><span class="line"></span><br><span class="line">&lt;/manifest&gt;</span><br></pre></td></tr></table></figure>

<p>主要分为连个页面，一个是墨迹天气的引导页面，就是GIF中涨势的效果，另外一个也是差不多的动画效果的只不过是左右滑动的引导页面</p>
</li>
<li><p>主页面布局MainActivity，主页面主要有一个viewpager构成，滑动方式为vertical</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">              xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;</span><br><span class="line">              android:orientation=&quot;vertical&quot;</span><br><span class="line">              android:layout_width=&quot;match_parent&quot;</span><br><span class="line">              android:layout_height=&quot;match_parent&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;cn.lry.animation.viewpager.ViewPager</span><br><span class="line">        android:id=&quot;@+id/pager&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot;</span><br><span class="line">        app:orientation=&quot;vertical&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ViewPager的初始化，通过xml文件来初始化每个页面的视图，然后通过pagers.add(view1)添加到ViewPager中，总共有四个</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">View view1 = LayoutInflater.from(this).inflate(R.layout.layout_tutorial_1, null);</span><br><span class="line"> t1_icon1= (ImageView) view1.findViewById(R.id.t1_icon1);</span><br><span class="line"> t1_icon2 = (ImageView) view1.findViewById(R.id.t1_icon2);</span><br><span class="line"> t1_fixed = (ImageView) view1.findViewById(R.id.t1_fixed);</span><br><span class="line"> t1_next = (ImageView) view1.findViewById(R.id.t1_next);</span><br><span class="line"> pagers.add(view1);</span><br><span class="line"> .........四个类似的页面</span><br></pre></td></tr></table></figure>
</li>
<li><p>我们看其中一个页面的布局R.layout.layout_tutorial_1，也就是将页面上的几个图片分别用ImageView来进行布局分布。每个图片都是一个png的图片</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    android:layout_width=&quot;fill_parent&quot;</span><br><span class="line">    android:layout_height=&quot;fill_parent&quot;</span><br><span class="line">    android:background=&quot;@android:color/white&quot;</span><br><span class="line">    android:gravity=&quot;center&quot;</span><br><span class="line">    android:orientation=&quot;vertical&quot; &gt;</span><br><span class="line"></span><br><span class="line">    &lt;ImageView</span><br><span class="line">        android:id=&quot;@+id/t1_fixed&quot;</span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_marginBottom=&quot;15.0dip&quot;</span><br><span class="line">        android:src=&quot;@mipmap/tutorial1_fixed&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;RelativeLayout</span><br><span class="line">        android:id=&quot;@+id/center_layout&quot;</span><br><span class="line">        android:layout_width=&quot;fill_parent&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_centerInParent=&quot;true&quot; &gt;</span><br><span class="line"></span><br><span class="line">        &lt;ImageView</span><br><span class="line">            android:id=&quot;@+id/t1_icon1&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_marginLeft=&quot;180.0dip&quot;</span><br><span class="line">            android:layout_marginTop=&quot;53.0dip&quot;</span><br><span class="line">            android:background=&quot;@drawable/t1_frame_animation&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;ImageView</span><br><span class="line">            android:id=&quot;@+id/t1_icon2&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_below=&quot;@id/t1_icon1&quot;</span><br><span class="line">            android:layout_centerHorizontal=&quot;true&quot;</span><br><span class="line">            android:layout_marginTop=&quot;30.0dip&quot;</span><br><span class="line">            android:src=&quot;@mipmap/tutorial1_icon3&quot;</span><br><span class="line">            android:visibility=&quot;visible&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;ImageView</span><br><span class="line">            android:id=&quot;@+id/t1_static&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_centerHorizontal=&quot;true&quot;</span><br><span class="line">            android:src=&quot;@mipmap/tutorial1_static&quot;</span><br><span class="line">            android:visibility=&quot;visible&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;ImageView</span><br><span class="line">            android:id=&quot;@+id/t1_text&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_below=&quot;@id/t1_static&quot;</span><br><span class="line">            android:layout_centerHorizontal=&quot;true&quot;</span><br><span class="line">            android:layout_marginTop=&quot;10.0dip&quot;</span><br><span class="line">            android:src=&quot;@mipmap/tutorial1_text&quot;</span><br><span class="line">            android:visibility=&quot;visible&quot; /&gt;</span><br><span class="line">    &lt;/RelativeLayout&gt;</span><br><span class="line"></span><br><span class="line">    &lt;ImageView</span><br><span class="line">        android:id=&quot;@+id/t1_next&quot;</span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_marginTop=&quot;20.0dip&quot;</span><br><span class="line">        android:src=&quot;@mipmap/tutorial_next&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/LinearLayout&gt;</span><br></pre></td></tr></table></figure>

<p>​</p>
</li>
<li><p>动画的实现主要靠private void animal(int position) 方法，在页面切换的时候，去启动或者禁用视图控件的动画</p>
</li>
</ol>
<h2 id="每个部分的动画实现"><a href="#每个部分的动画实现" class="headerlink" title="每个部分的动画实现"></a>每个部分的动画实现</h2><h4 id="第一页分析"><a href="#第一页分析" class="headerlink" title="第一页分析"></a>第一页分析</h4><ul>
<li><p>极低耗电 这几个字的放大缩小动画</p>
<p>极低耗电为一个图片 t1_fixed = (ImageView) view1.findViewById(R.id.t1_fixed);</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;ImageView</span><br><span class="line">       android:id=&quot;@+id/t1_fixed&quot;</span><br><span class="line">       android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">       android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">       android:layout_marginBottom=&quot;15.0dip&quot;</span><br><span class="line">       android:src=&quot;@mipmap/tutorial1_fixed&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>顶部动画加载</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">animationTop = AnimationUtils.loadAnimation(MainActivity.this, R.anim.tutorail_scalate_top);</span><br></pre></td></tr></table></figure>

<p>启动动画</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t1_fixed.startAnimation(animationTop);</span><br></pre></td></tr></table></figure>

<p>主要分析这个动画的描述R.anim.tutorail_scalate_top，主要定义了两个动画效果scale，放大缩小，动画时长1000ms，x,y从1.0变为1.5倍大，重复模式reverse为倒序回复，如果设置为restart的话，表示从头回放，repeatcount负一表示无限循环；另外一个是alpha，时间也是1000，这样就是一边放大缩小，一边透明度渐变，透明度从1变为0.5</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;</span><br><span class="line">    &lt;scale</span><br><span class="line">        android:duration=&quot;1000&quot;</span><br><span class="line">        android:fromXScale=&quot;1.0&quot;</span><br><span class="line">        android:fromYScale=&quot;1.0&quot;</span><br><span class="line">        android:interpolator=&quot;@android:anim/decelerate_interpolator&quot;</span><br><span class="line">        android:pivotX=&quot;50%&quot;</span><br><span class="line">        android:pivotY=&quot;50%&quot;</span><br><span class="line">        android:toXScale=&quot;1.5&quot;</span><br><span class="line">        android:toYScale=&quot;1.5&quot;</span><br><span class="line">        android:repeatMode=&quot;reverse&quot;</span><br><span class="line">        android:repeatCount=&quot;-1&quot;/&gt;</span><br><span class="line">    &lt;alpha</span><br><span class="line">        android:fromAlpha=&quot;1.0&quot;</span><br><span class="line">        android:toAlpha=&quot;0.5&quot;</span><br><span class="line">        android:duration=&quot;1000&quot;</span><br><span class="line">        android:repeatMode=&quot;reverse&quot;</span><br><span class="line">        android:repeatCount=&quot;-1&quot;/&gt;</span><br><span class="line">&lt;/set&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 尺寸伸缩动画效果 scale</span><br><span class="line">       属性：interpolator 指定一个动画的插入器</span><br><span class="line">       常见动画插入器:</span><br><span class="line">            accelerate_decelerate_interpolator  加速-减速 动画插入器</span><br><span class="line">            accelerate_interpolator        加速-动画插入器</span><br><span class="line">            decelerate_interpolator        减速- 动画插入器</span><br><span class="line">            anticipate_interpolator	先回退一小步然后加速前进</span><br><span class="line">            anticipate_overshoot_interpolator	在上一个基础上超出终点一小步再回到终点</span><br><span class="line">            bounce_interpolator	最后阶段弹球效果</span><br><span class="line">            cycle_interpolator	周期运动</span><br><span class="line">            linear_interpolator	匀速</span><br><span class="line">            overshoot_interpolator	快速到达终点并超出一小步最后回到终点</span><br><span class="line">      浮点型值：</span><br><span class="line">          </span><br><span class="line">            fromXScale 属性为动画起始时 X坐标上的伸缩尺寸    </span><br><span class="line">            toXScale   属性为动画结束时 X坐标上的伸缩尺寸     </span><br><span class="line">         </span><br><span class="line">            fromYScale 属性为动画起始时Y坐标上的伸缩尺寸    </span><br><span class="line">            toYScale   属性为动画结束时Y坐标上的伸缩尺寸    </span><br><span class="line">         </span><br><span class="line">            说明:</span><br><span class="line">                 以上四种属性值    </span><br><span class="line">     </span><br><span class="line">                    0.0表示收缩到没有 </span><br><span class="line">                    1.0表示正常无伸缩     </span><br><span class="line">                    值小于1.0表示收缩  </span><br><span class="line">                    值大于1.0表示放大</span><br><span class="line">         </span><br><span class="line">            pivotX     属性为动画相对于物件的X坐标的开始位置</span><br><span class="line">            pivotY     属性为动画相对于物件的Y坐标的开始位置</span><br><span class="line">         </span><br><span class="line">            说明:</span><br><span class="line">                    以上两个属性值 从0%-100%中取值</span><br><span class="line">                    50%为物件的X或Y方向坐标上的中点位置</span><br><span class="line">         </span><br><span class="line">        长整型值：</span><br><span class="line">            duration  属性为动画持续时间</span><br><span class="line">            说明:   时间以毫秒为单位</span><br><span class="line"> </span><br><span class="line">        布尔型值:</span><br><span class="line">            fillAfter 属性 当设置为true ，该动画转化在动画结束后被应用</span><br><span class="line">--&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>中间电池图标的旋转动画</p>
<p>电池图标</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;ImageView</span><br><span class="line">       android:id=&quot;@+id/t1_icon2&quot;</span><br><span class="line">       android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">       android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">       android:layout_below=&quot;@id/t1_icon1&quot;</span><br><span class="line">       android:layout_centerHorizontal=&quot;true&quot;</span><br><span class="line">       android:layout_marginTop=&quot;30.0dip&quot;</span><br><span class="line">       android:src=&quot;@mipmap/tutorial1_icon3&quot;</span><br><span class="line">       android:visibility=&quot;visible&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>加载并开始动画</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Animation animation1 = AnimationUtils.loadAnimation(MainActivity.this, R.anim.tutorail_rotate);</span><br><span class="line">                LinearInterpolator lin = new LinearInterpolator();</span><br><span class="line">                animation1.setInterpolator(lin);</span><br><span class="line"></span><br><span class="line">                t1_icon2.setVisibility(View.VISIBLE);</span><br><span class="line">                t1_icon2.startAnimation(animation1);</span><br></pre></td></tr></table></figure>

<p>关于旋转动画的描述，刚开始的时候，电池图标是从无到有的一个从小到大的scale，android:fromXScale=”0.0”到1.2，然后就结束了，同时会无限的旋转，rotate，从0度到359度旋转，时间为3000ms，pivotX,Y 50%表示从以中心点旋转</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt;</span><br><span class="line"></span><br><span class="line">    &lt;scale</span><br><span class="line">        android:duration=&quot;800&quot;</span><br><span class="line">        android:fillAfter=&quot;false&quot;</span><br><span class="line">        android:fromXScale=&quot;0.0&quot;</span><br><span class="line">        android:fromYScale=&quot;0.0&quot;</span><br><span class="line">        android:interpolator=&quot;@android:anim/accelerate_decelerate_interpolator&quot;</span><br><span class="line">        android:pivotX=&quot;50%&quot;</span><br><span class="line">        android:pivotY=&quot;50%&quot;</span><br><span class="line">        android:toXScale=&quot;1.2&quot;</span><br><span class="line">        android:toYScale=&quot;1.2&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;rotate</span><br><span class="line">        android:duration=&quot;3000&quot;</span><br><span class="line">        android:fromDegrees=&quot;0&quot;</span><br><span class="line">        android:pivotX=&quot;50%&quot;</span><br><span class="line">        android:pivotY=&quot;50%&quot;</span><br><span class="line">        android:repeatCount=&quot;-1&quot;</span><br><span class="line">        android:toDegrees=&quot;359.0&quot; /&gt;</span><br><span class="line">    &lt;!-- rotate 旋转动画效果</span><br><span class="line">       属性：interpolator 指定一个动画的插入器</span><br><span class="line">           </span><br><span class="line">       浮点数型值:</span><br><span class="line">            fromDegrees 属性为动画起始时物件的角度    </span><br><span class="line">            toDegrees   属性为动画结束时物件旋转的角度 可以大于360度   </span><br><span class="line"> </span><br><span class="line">         </span><br><span class="line">            说明:</span><br><span class="line">                     当角度为负数——表示逆时针旋转</span><br><span class="line">                     当角度为正数——表示顺时针旋转              </span><br><span class="line">                     (负数from——to正数:顺时针旋转)   </span><br><span class="line">                     (负数from——to负数:逆时针旋转) </span><br><span class="line">                     (正数from——to正数:顺时针旋转) </span><br><span class="line">                     (正数from——to负数:逆时针旋转)       </span><br><span class="line"> </span><br><span class="line">            pivotX     属性为动画相对于物件的X坐标的开始位置</span><br><span class="line">            pivotY     属性为动画相对于物件的Y坐标的开始位置</span><br><span class="line">                 </span><br><span class="line">            说明:        以上两个属性值 从0%-100%中取值</span><br><span class="line">                         50%为物件的X或Y方向坐标上的中点位置</span><br><span class="line"> </span><br><span class="line">        长整型值：</span><br><span class="line">            duration  属性为动画持续时间</span><br><span class="line">            说明:       时间以毫秒为单位</span><br><span class="line">--&gt;</span><br><span class="line"></span><br><span class="line">&lt;/set&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>电池图片数字的闪烁变换</p>
<p>闪烁的图片</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;ImageView</span><br><span class="line">           android:id=&quot;@+id/t1_icon1&quot;</span><br><span class="line">           android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">           android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">           android:layout_marginLeft=&quot;180.0dip&quot;</span><br><span class="line">           android:layout_marginTop=&quot;53.0dip&quot;</span><br><span class="line">           android:background=&quot;@drawable/t1_frame_animation&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>图片定义t1_frame_animation.xml，animation-list实现的是逐帧动画，oneshot表示不停的循环播放，每个帧的图片和时长定义</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;animation-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    android:oneshot=&quot;false&quot; &gt;</span><br><span class="line">&lt;!--   </span><br><span class="line">    根标签为animation-list，其中oneshot代表着是否只展示一遍，设置为false会不停的循环播放动画  </span><br><span class="line">    根标签下，通过item标签对动画中的每一个图片进行声明  </span><br><span class="line">    android:duration 表示展示所用的该图片的时间长度  </span><br><span class="line"> --&gt;  </span><br><span class="line">    &lt;item</span><br><span class="line">        android:drawable=&quot;@mipmap/tutorial1_icon1&quot;</span><br><span class="line">        android:duration=&quot;200&quot;/&gt;</span><br><span class="line">    &lt;item</span><br><span class="line">        android:drawable=&quot;@mipmap/tutorial1_icon2&quot;</span><br><span class="line">        android:duration=&quot;200&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/animation-list&gt;</span><br></pre></td></tr></table></figure>

<p>开始启动动画</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">t1_icon1.setImageResource(R.drawable.t1_frame_animation);</span><br><span class="line">               t1_icon1_animationDrawable = (AnimationDrawable) t1_icon1.getDrawable();</span><br><span class="line">               </span><br><span class="line">t1_icon1_animationDrawable.start();</span><br></pre></td></tr></table></figure>
</li>
<li><p>最下角箭头下移和透明度变换</p>
<p>底部箭头</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    &lt;ImageView</span><br><span class="line">android:id=&quot;@+id/t1_next&quot;</span><br><span class="line">android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">android:layout_marginTop=&quot;20.0dip&quot;</span><br><span class="line">android:src=&quot;@mipmap/tutorial_next&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>加载动画</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">animationBottom = AnimationUtils.loadAnimation(MainActivity.this, R.anim.tutorail_bottom);</span><br></pre></td></tr></table></figure>

<p>启动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t1_next.startAnimation(animationBottom);</span><br></pre></td></tr></table></figure>

<p>动画描述文件tutorail_bottom.xml，转移动画和透明度的组合</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    android:repeatMode=&quot;reverse&quot; &gt;</span><br><span class="line"></span><br><span class="line">    &lt;translate</span><br><span class="line">        android:duration=&quot;1000&quot;</span><br><span class="line">        android:fromXDelta=&quot;0&quot;</span><br><span class="line">        android:fromYDelta=&quot;-15&quot;</span><br><span class="line">        android:repeatCount=&quot;infinite&quot;</span><br><span class="line">        android:toXDelta=&quot;0&quot;</span><br><span class="line">        android:toYDelta=&quot;20&quot; /&gt;</span><br><span class="line">    &lt;!-- translate 平移动画效果</span><br><span class="line">        整型值:</span><br><span class="line">            fromXDelta 属性为动画起始时 X坐标上的位置    </span><br><span class="line">            toXDelta   属性为动画结束时 X坐标上的位置</span><br><span class="line">            fromYDelta 属性为动画起始时 Y坐标上的位置</span><br><span class="line">            toYDelta   属性为动画结束时 Y坐标上的位置</span><br><span class="line">            注意:</span><br><span class="line">                     没有指定fromXType toXType fromYType toYType 时候，</span><br><span class="line">                     默认是以自己为相对参照物  ，默认参考物最重要         </span><br><span class="line">        长整型值：</span><br><span class="line">            duration  属性为动画持续时间</span><br><span class="line">            说明:   时间以毫秒为单位</span><br><span class="line">--&gt;</span><br><span class="line"></span><br><span class="line">    &lt;alpha</span><br><span class="line">        android:duration=&quot;1000&quot;</span><br><span class="line">        android:fromAlpha=&quot;1.0&quot;</span><br><span class="line">        android:repeatCount=&quot;infinite&quot;</span><br><span class="line">        android:toAlpha=&quot;0.3&quot; /&gt;</span><br><span class="line">    &lt;!--</span><br><span class="line">         透明度控制动画效果 alpha</span><br><span class="line">        浮点型值：</span><br><span class="line">            fromAlpha 属性为动画起始时透明度</span><br><span class="line">            toAlpha   属性为动画结束时透明度</span><br><span class="line">            说明: </span><br><span class="line">                0.0表示完全透明</span><br><span class="line">                1.0表示完全不透明</span><br><span class="line">            以上值取0.0-1.0之间的float数据类型的数字</span><br><span class="line">         </span><br><span class="line">        长整型值：</span><br><span class="line">            duration  属性为动画持续时间</span><br><span class="line">            说明:     </span><br><span class="line">                时间以毫秒为单位</span><br><span class="line">        整型值:        </span><br><span class="line">            repeatCount：重复次数</span><br><span class="line">            说明：</span><br><span class="line">            infinite：循环执行，</span><br><span class="line">            具体正整数表示循环次数</span><br><span class="line">            </span><br><span class="line">             repeatMode：重复模式，</span><br><span class="line">             说明：</span><br><span class="line">                restart：重新从头开始执行</span><br><span class="line">                reverse：反方向执行</span><br><span class="line">             </span><br><span class="line">    --&gt;</span><br><span class="line"></span><br><span class="line">&lt;/set&gt;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>其他页面的也都差不多原理实现</p>
<h3 id="第三页分析"><a href="#第三页分析" class="headerlink" title="第三页分析"></a>第三页分析</h3><p>可以看一下火箭飞后面云朵的动画</p>
<p>每个云朵都是一个image view</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;ImageView</span><br><span class="line">           android:id=&quot;@+id/t3_icon3&quot;</span><br><span class="line">           android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">           android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">           android:layout_alignParentLeft=&quot;true&quot;</span><br><span class="line">           android:layout_alignParentTop=&quot;true&quot;</span><br><span class="line">           android:layout_marginLeft=&quot;120.0dip&quot;</span><br><span class="line">           android:layout_marginTop=&quot;45.0dip&quot;</span><br><span class="line">           android:src=&quot;@mipmap/t3_could_left2&quot;</span><br><span class="line">           android:visibility=&quot;invisible&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>启动动画</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">t3_icon2.startAnimation(transAnimation2);</span><br></pre></td></tr></table></figure>

<p>动画定义</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">final TranslateAnimation transAnimation2 = new TranslateAnimation(fx1, tx1, fy1, ty1);</span><br><span class="line">                transAnimation2.setDuration(800);</span><br><span class="line">                transAnimation2.setRepeatCount(Animation.INFINITE);</span><br><span class="line">                transAnimation2.setRepeatMode(Animation.RESTART);</span><br><span class="line">                lin = new LinearInterpolator();</span><br><span class="line">                transAnimation2.setInterpolator(lin);</span><br><span class="line"></span><br><span class="line">                final TranslateAnimation transAnimation3 = new TranslateAnimation(fx2, tx2, fy2, ty2);</span><br><span class="line">                transAnimation3.setDuration(1200);</span><br><span class="line">                transAnimation3.setRepeatCount(Animation.INFINITE);</span><br><span class="line">                transAnimation3.setRepeatMode(Animation.RESTART);</span><br><span class="line">                transAnimation3.setInterpolator(lin);</span><br></pre></td></tr></table></figure>

<p>每个云朵的移动速度不一样，其实位置fx1,fy1到目标位置tx1,ty1也不一样</p>
<h3 id="第四页分析"><a href="#第四页分析" class="headerlink" title="第四页分析"></a>第四页分析</h3><p>挂牌左右摇晃动画</p>
<p>挂牌</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;ImageView</span><br><span class="line">        android:id=&quot;@+id/t4_icon1&quot;</span><br><span class="line">        android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:src=&quot;@mipmap/t4_image&quot;</span><br><span class="line">        android:visibility=&quot;visible&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p>左右摇晃动画</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">int pivot = Animation.RELATIVE_TO_SELF;</span><br><span class="line">CycleInterpolator interpolator = new CycleInterpolator(3.0f);//执行多少次</span><br><span class="line">RotateAnimation animation = new RotateAnimation(0, 10, pivot, 0.47f, pivot, 0.05f);</span><br><span class="line">animation.setStartOffset(500);</span><br><span class="line">animation.setDuration(3000);</span><br><span class="line">animation.setRepeatCount(1);// Animation.INFINITE</span><br><span class="line">animation.setInterpolator(interpolator);</span><br><span class="line">t4_icon1.startAnimation(animation);</span><br></pre></td></tr></table></figure>

<p>其他基本都是类似的实现：</p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><p>以上动画使用了Android的基本动画类型alpha，rotate，scale，translate，另外引入插值器完成动画</p>
<p>下面火箭的上升有一个自定义属性动画，我们现认识一下，后续在细细学习分析</p>
<h3 id="火箭的上升动画"><a href="#火箭的上升动画" class="headerlink" title="火箭的上升动画"></a>火箭的上升动画</h3><p>火箭view</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;ImageView</span><br><span class="line">      android:id=&quot;@+id/page_one_rocket&quot;</span><br><span class="line">      android:layout_width=&quot;80dp&quot;</span><br><span class="line">      android:layout_height=&quot;80dp&quot;</span><br><span class="line">      android:src=&quot;@mipmap/image_one_rocket&quot;</span><br><span class="line">      android:layout_below=&quot;@+id/page_one_center_bg&quot;</span><br><span class="line">      android:layout_toLeftOf=&quot;@+id/center&quot;</span><br><span class="line">      android:layout_marginRight=&quot;30dp&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>加载动画</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">animationRocket = ArcAnimator.createArcAnimator(page_one_rocket, centerX + r - x*3/2 + 20, centerY - r + 3*x/4 - 20 , 90f, Side.RIGHT);</span><br><span class="line">animationRocket.addListener(new Animator.AnimatorListener() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onAnimationStart(Animator animation) &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onAnimationEnd(Animator animation) &#123;</span><br><span class="line">        page_one_center_tj.startAnimation(animationCenterTJ);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onAnimationCancel(Animator animation) &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onAnimationRepeat(Animator animation) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">animationRocket.setDuration(1500);</span><br><span class="line">animationRocket.start();</span><br></pre></td></tr></table></figure>

<p>其中 ArcAnimator是自定义的属性动画</p>
<p><img src="images/path.png" alt="路径示意图"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line">package cn.lry.animation.arcanimator;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import android.view.View;</span><br><span class="line">import android.view.animation.Interpolator;</span><br><span class="line"></span><br><span class="line">import com.nineoldandroids.animation.Animator;</span><br><span class="line">import com.nineoldandroids.animation.ObjectAnimator;</span><br><span class="line">import com.nineoldandroids.view.ViewHelper;</span><br><span class="line"></span><br><span class="line">import java.lang.ref.WeakReference;</span><br><span class="line"></span><br><span class="line">public class ArcAnimator extends Animator &#123;</span><br><span class="line"></span><br><span class="line">    public static ArcAnimator createArcAnimator(View clipView, View nestView, float degree, Side side)&#123;</span><br><span class="line">        return createArcAnimator(clipView, Utils.centerX(nestView), Utils.centerY(nestView), degree, side);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static ArcAnimator createArcAnimator(View clipView, float endX, float endY, float degree, Side side)&#123;</span><br><span class="line">        ArcMetric arcMetric = ArcMetric.evaluate(Utils.centerX(clipView), Utils.centerY(clipView), endX, endY, degree, side);</span><br><span class="line">        return new ArcAnimator(arcMetric, clipView);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ArcMetric mArcMetric;</span><br><span class="line">    WeakReference&lt;View&gt; mTarget;</span><br><span class="line">    WeakReference&lt;ObjectAnimator&gt; mAnimator;</span><br><span class="line">    float mValue;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    private ArcAnimator(ArcMetric arcmetric, View target) &#123;</span><br><span class="line">        mArcMetric = arcmetric;</span><br><span class="line">        mTarget = new WeakReference&lt;&gt;(target);</span><br><span class="line"></span><br><span class="line">        mAnimator = new WeakReference&lt;&gt;(</span><br><span class="line">                ObjectAnimator.ofFloat(</span><br><span class="line">                        ArcAnimator.this, // target</span><br><span class="line">                        &quot;degree&quot;, // property</span><br><span class="line">                        arcmetric.getStartDegree(),</span><br><span class="line">                        arcmetric.getEndDegree())</span><br><span class="line">        );//其实主要就是一个ObjectAnimator，关注的是degree的值</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void setDegree(float degree)&#123;</span><br><span class="line">        mValue = degree;</span><br><span class="line">        View clipView = mTarget.get();</span><br><span class="line">        float x = mArcMetric.getAxisPoint().x + mArcMetric.mRadius * Utils.cos(degree);</span><br><span class="line">        float y = mArcMetric.getAxisPoint().y - mArcMetric.mRadius * Utils.sin(degree);</span><br><span class="line">        ViewHelper.setX(clipView,x - clipView.getWidth() / 2);</span><br><span class="line">        ViewHelper.setY(clipView,y - clipView.getHeight() / 2);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    float getDegree()&#123;</span><br><span class="line">        return mValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public long getStartDelay() &#123;</span><br><span class="line">        Animator a = mAnimator.get();</span><br><span class="line">        return a == null ? 0 : a.getDuration();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void setStartDelay(long startDelay) &#123;</span><br><span class="line">        Animator a = mAnimator.get();</span><br><span class="line">        if(a != null) a.setStartDelay(startDelay);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public ArcAnimator setDuration(long duration) &#123;</span><br><span class="line">        Animator a = mAnimator.get();</span><br><span class="line">        if(a != null) a.setDuration(duration);</span><br><span class="line">        return this;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public long getDuration() &#123;</span><br><span class="line">        Animator a = mAnimator.get();</span><br><span class="line">        return a == null ? 0 : a.getDuration();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void setInterpolator(Interpolator value) &#123;</span><br><span class="line">        Animator a = mAnimator.get();</span><br><span class="line">        if(a != null) a.setInterpolator(value);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void start() &#123;</span><br><span class="line">        super.start();</span><br><span class="line">        Animator a = mAnimator.get();</span><br><span class="line">        if(a != null) a.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void end() &#123;</span><br><span class="line">        super.end();</span><br><span class="line">        Animator a = mAnimator.get();</span><br><span class="line">        if(a != null) a.end();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void cancel() &#123;</span><br><span class="line">        super.cancel();</span><br><span class="line">        Animator a = mAnimator.get();</span><br><span class="line">        if(a != null) a.cancel();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void addListener(AnimatorListener listener) &#123;</span><br><span class="line">        Animator a = mAnimator.get();</span><br><span class="line">        if(a != null) a.addListener(listener);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void setupEndValues() &#123;</span><br><span class="line">        super.setupEndValues();</span><br><span class="line">        Animator a = mAnimator.get();</span><br><span class="line">        if(a != null) a.setupEndValues();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void setupStartValues() &#123;</span><br><span class="line">        super.setupStartValues();</span><br><span class="line">        Animator a = mAnimator.get();</span><br><span class="line">        if(a != null) a.setupStartValues();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public boolean isRunning() &#123;</span><br><span class="line">        Animator a = mAnimator.get();</span><br><span class="line">        return a != null &amp;&amp; a.isRunning();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return mArcMetric.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>关注一下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ArcAnimator.createArcAnimator(page_one_rocket, centerX + r - x*3/2 + 20, centerY - r + 3*x/4 - 20 , 90f, Side.RIGHT);</span><br></pre></td></tr></table></figure>

<p><code>centerX + r - x*3/2 + 20</code>和<code>centerY - r + 3*x/4 - 20</code>是计算出来火箭图标的最终目标位置的x,y坐标</p>
<p>看几条路线轨迹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">01-10 04:57:03.822 11717-11717/cn.lry.animation I/GuideActivity: r=270.0中间背景的长宽</span><br><span class="line">01-10 04:57:03.822 11717-11717/cn.lry.animation I/GuideActivity: x=120.0火箭图标的长宽</span><br><span class="line">这两个只是用来算目标位置的坐标</span><br><span class="line"></span><br><span class="line">01-10 04:57:03.832 11717-11717/cn.lry.animation I/ArcAnimator: createArcAnimator endx=349.0 endy=217.0degree90.0side =RIGHT</span><br><span class="line">计算出目标位置的坐标为349，217</span><br><span class="line"></span><br><span class="line">01-10 04:57:03.845 11717-11717/cn.lry.animation I/ArcAnimator: createArcAnimator starx=74.0 starty=381.0</span><br><span class="line">当前位置的坐标，最后还进行了中心计算</span><br><span class="line"></span><br><span class="line">01-10 04:57:03.884 11717-11717/cn.lry.animation I/ArcAnimator: setDegree=0.0</span><br><span class="line"></span><br><span class="line">01-10 04:57:03.885 11717-11717/cn.lry.animation I/ArcAnimator: x=134.00002===ArcM.x + ArcM.r * cos(-88.82553): 129.5 + 219.54613 * 0.020496916</span><br><span class="line">01-10 04:57:03.886 11717-11717/cn.lry.animation I/ArcAnimator: y=441.0===ArcM.y + ArcM.r * sin(-88.82553): 221.5 + 219.54613 * -0.9997899</span><br><span class="line">01-10 04:57:03.887 11717-11717/cn.lry.animation I/ArcAnimator: setviewX=74.000015</span><br><span class="line">01-10 04:57:03.887 11717-11717/cn.lry.animation I/ArcAnimator: setviewy=381.0</span><br><span class="line">第一次偏移，当前</span><br><span class="line"></span><br><span class="line">01-10 04:57:03.917 11717-11717/cn.lry.animation I/ArcAnimator: setDegree=-88.82553</span><br><span class="line">01-10 04:57:03.919 11717-11717/cn.lry.animation I/ArcAnimator: x=134.00002===ArcM.x + ArcM.r * cos(-88.82553): 129.5 + 219.54613 * 0.020496916</span><br><span class="line">01-10 04:57:03.920 11717-11717/cn.lry.animation I/ArcAnimator: y=441.0===ArcM.y + ArcM.r * sin(-88.82553): 221.5 + 219.54613 * -0.9997899</span><br><span class="line">01-10 04:57:03.920 11717-11717/cn.lry.animation I/ArcAnimator: setviewX=74.000015</span><br><span class="line">01-10 04:57:03.920 11717-11717/cn.lry.animation I/ArcAnimator: setviewy=381.0</span><br><span class="line">01-10 04:57:03.965 11717-11717/cn.lry.animation I/ArcAnimator: setDegree=-88.82553</span><br><span class="line">01-10 04:57:03.966 11717-11717/cn.lry.animation I/ArcAnimator: x=134.83453===ArcM.x + ArcM.r * cos(-88.60769): 129.5 + 219.54613 * 0.024298022</span><br><span class="line">01-10 04:57:03.967 11717-11717/cn.lry.animation I/ArcAnimator: y=440.98132===ArcM.y + ArcM.r * sin(-88.60769): 221.5 + 219.54613 * -0.9997048</span><br></pre></td></tr></table></figure>

<p>轨迹的示意图大概如下，90度是一个四分之一圆弧，180度就是一个半圆弧</p>

      </div>
      <div class="post-copyright">
    <p class="copyright-item">
      <span>原文作者: </span>
      <a href="https://lynn8570.github.io">lynn8570</a>
    </p>
    <p class="copyright-item">
      <span>原文链接: </span>
      <a href="https://lynn8570.github.io/2018/04/13/引导页面动画/">https://lynn8570.github.io/2018/04/13/引导页面动画/</a>
    </p>
    <p class="copyright-item">
      <span>许可协议: </span><a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>
    </p>
  </div>
      <footer class="post-footer">
        
        <nav class="post-nav"><a class="prev" href="/2018/04/13/Loading动画效果/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">Loading 动画效果</span>
        <span class="prev-text nav-mobile">上一篇</span>
      </a>
    <a class="next" href="/2018/04/12/animation summary/">
        <span class="next-text nav-default">动画收集summary</span>
        <span class="prev-text nav-mobile">下一篇</span>
        <i class="iconfont icon-right"></i>
      </a>
    </nav></footer>
    </article></div><div class="comments" id="comments"></div></div>
      </main>

      <footer id="footer" class="footer"><div class="social-links"><a href="mailto:your@email.com" class="iconfont icon-email" title="email"></a>
        <a href="https://github.com/ahonn" class="iconfont icon-github" title="github"></a>
        <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    </div><div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://hexo.io/">Hexo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">&copy;2015 - 2020<span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">lynn8570</span>
  </span>
</div>
</footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div><script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/lib/pjax/jquery.pjax.min.js"></script>
  <script type="text/javascript" src="/lib/nprogress/nprogress.min.js"></script>
  <script type="text/javascript" src="/js/src/even.js?v=2.11.0"></script>
</body>
</html>
